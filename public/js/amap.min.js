// 高德地图离线JS加载器
// 这个文件用于标识离线模式，实际的高德地图API会通过其他方式加载

console.log('离线高德地图模式启动');

// 检查是否已经加载了AMap
if (typeof window.AMap === 'undefined') {
  console.log('AMap未定义，将加载在线版本');
  
  // 动态加载在线版本
  const script = document.createElement('script');
  script.src = 'https://webapi.amap.com/maps?v=2.0&key=5a2e4a9af3bad2091692a8028ba53210';
  script.onload = function() {
    console.log('在线高德地图API加载完成');
    // 触发自定义事件通知组件
    window.dispatchEvent(new CustomEvent('amapLoaded'));
  };
  script.onerror = function() {
    console.error('在线高德地图API加载失败');
  };
  document.head.appendChild(script);
} else {
  console.log('AMap已存在');
  // 触发自定义事件
  setTimeout(() => {
    window.dispatchEvent(new CustomEvent('amapLoaded'));
  }, 100);
}
